{% extends 'web/_base.html' %}

{% block page_title %}Indicadores Económicos{% endblock %}
{% block page_subtitle %}
  <span class="text-sm text-gray-500">
    Datos obtenidos en tiempo real del Microservicio Externo (Puerto 5000)
  </span>
{% endblock %}

{% block content %}

  {% if info %}
    <div class="mb-6 p-4 rounded-lg bg-green-50 border border-green-200 flex items-center gap-3">
      <div class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></div>
      <span class="text-green-800 font-medium">
        Microservicio Conectado: {{ info.origen }}
      </span>
      <span class="ml-auto text-sm text-green-700">Fecha: {{ info.fecha }}</span>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      
      <div class="card p-6 border-l-4 border-[color:var(--nuamx)] shadow-sm">
        <div class="text-[color:var(--muted)] text-xs uppercase font-bold tracking-wider">Valor UF</div>
        <div class="text-3xl font-bold text-[color:var(--ink)] mt-2">
          ${{ info.valores.uf }}
        </div>
      </div>

      <div class="card p-6 border-l-4 border-blue-500 shadow-sm">
        <div class="text-[color:var(--muted)] text-xs uppercase font-bold tracking-wider">Valor UTM</div>
        <div class="text-3xl font-bold text-[color:var(--ink)] mt-2">
          ${{ info.valores.utm }}
        </div>
      </div>

      <div class="card p-6 border-l-4 border-yellow-500 shadow-sm">
        <div class="text-[color:var(--muted)] text-xs uppercase font-bold tracking-wider">Dólar Obs.</div>
        <div class="text-3xl font-bold text-[color:var(--ink)] mt-2">
          ${{ info.valores.dolar }}
        </div>
      </div>

      <div class="card p-6 border-l-4 border-purple-500 shadow-sm">
        <div class="text-[color:var(--muted)] text-xs uppercase font-bold tracking-wider">IPC (Var. Mensual)</div>
        <div class="text-3xl font-bold text-[color:var(--ink)] mt-2">
          {{ info.valores.ipc }}
        </div>
      </div>

    </div>

  {% else %}
    <div class="p-6 bg-red-50 border border-red-200 rounded-lg text-center">
      <h3 class="text-red-700 font-bold text-lg mb-2">⚠️ Error de Conexión</h3>
      <p class="text-red-600 mb-4">{{ error }}</p>
      <p class="text-sm text-gray-500">
        Asegúrate de que la terminal del microservicio esté corriendo: 
        <code class="bg-gray-200 px-2 py-1 rounded">python app.py</code>
      </p>
      <a href="/indicadores/" class="btn mt-4 inline-block">Reintentar Conexión</a>
    </div>
  {% endif %}

{% endblock %}